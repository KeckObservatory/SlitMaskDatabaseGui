<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--  bootstrap examples-->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
  <!-- Google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" href="css/styles.css">
  <!--  end bootstrap examples-->

  <link rel="stylesheet" type="text/css" href="css/Mask.css">
  <script type="module" src="js/header.js"></script>
  <script type="module" src="js/MaskMain.js"></script>
  <script type="module" src="js/sidebar.js"></script>

  <title>Slit Mask Menu</title>
  <style>
      .content {
          margin-left: 250px;
          padding: 20px;
          transition: margin-left 0.3s ease;
      }
      #keckFoot {
          margin-left: 200px;
          padding: 10px;
          transition: margin-left 0.3s ease;
      }

  </style>


</head>

<body>

<!-- add the common header -->
<div id="pageName" style="display: none;">Keck Slitmask Portal</div>
<div id="headerContainer"></div>

<!-- add the sidebar links dynamically -->
<div class="sidebar" id="sidebar">
  <button class="toggle-btn" onclick="toggleSidebar()">...</button>
  <div id="sidebarLinks"></div>
</div>


<!-- Main content dynamically loaded -->
<div class="content" id="content">
</div>

<footer id="keckFoot">
    <object type="text/html" data="footer.html" id="footer" width="100%" style="overflow:auto; border:0;"></object>
</footer>


<script>
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const content = document.querySelector('.content');
    const foot = document.querySelector('#keckFoot');

    // Toggle the 'open' class
    sidebar.classList.toggle('open');

    if (sidebar.classList.contains('open')) {
      foot.style.marginLeft = '0';
      content.style.marginLeft = '50px';
    } else {
      foot.style.marginLeft = '200px';
      content.style.marginLeft = '250px';
    }
  }

  function loadContent(url) {
    fetch(url)
    .then(response => response.text())
    .then(data => {
      const mainContent = document.getElementById('content');
      mainContent.innerHTML = data;

      // Find and execute scripts within the loaded content
      const scripts = mainContent.querySelectorAll('script[type="module"]');
      scripts.forEach(script => {
        const newScript = document.createElement('script');
        newScript.type = 'module';
        newScript.text = script.text;
        document.body.appendChild(newScript);
      });
    })
    .catch(error => console.error('Error loading content:', error));
  }

  // Load content from MainTest.html initially
  window.onload = function() {
    loadContent('MaskHome.html');
  };

</script>
<script type="module">
  import { addAdminButton } from './MaskMain.js';
    addAdminButton();
</script>
</body>

</html>
