<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- css -->
    <link href="//cdn.muicss.com/mui-latest/css/mui.min.css" rel="stylesheet" type="text/css" />
    <link href="css/mui-style.css" rel="stylesheet" type="text/css" />
    <link href="css/Mask.css" rel="stylesheet" type="text/css" />

    <!-- js -->
    <script src="//cdn.muicss.com/mui-latest/js/mui.min.js"></script>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

    <script src="js/mui-scripts.js"></script>
    <script src="js/appbar.js"></script>
    <script src="js/sidebar.js"></script>

    <!-- For the MaskSubmit.html   -->
    <script src="js/MaskSubmit.js"></script>

    <!-- For loading the content into the same page -->
    <script type="module" src="js/MaskMain.js"></script>

  </head>
  <body>

    <!-- add the sidebar links -->
    <div id="sidedrawer"></div>

    <!-- TODO button doesn't work with thi-->
    <!-- Header / MUI AppBar generated by js/appbar.js and appbar.html-->
<!--    <div id="shared-header"></div>-->

    <script>
      // add the common header
      window.addEventListener('DOMContentLoaded', loadHeader);
    </script>

    <div id="shared-header">
      <header id="header">
        <div class="mui-appbar mui--appbar-line-height">
          <div class="mui-container-fluid">
            <table width="100%">
              <tr style="vertical-align:middle;">
              <!-- LEFT -->
              <td class="mui--appbar-height">
                <a class="sidedrawer-toggle mui--hidden-xs mui--hidden-sm js-hide-sidedrawer">â˜°</a>
                W.M. Keck Observatory
              </td>
                <!-- RIGHT -->
              <td class="mui--appbar-height" align="right">
                <div id="infoDropdownContainer" class="info-dropdown-container">
                  <div id="infoDropdown" class="mui--text-subhead"></div>
                </div>
              </td>
              </span>
              </tr>
            </table>
          </div>
        </div>
      </header>
    </div>



    <!-- Main content dynamically added by MaskTable.js / MaskPlot.js / MaskMain.js-->
    <div id="content-wrapper">
      <div class="mui--appbar-height"></div>
      <div class="mui-container-fluid">
        <br>
        <div class="content" id="content">
        </div>
      </div>
    </div>

    <!-- add basic footer -->
    <footer id="footer">
      <div class="mui-container-fluid mui--align-bottom">
        <div class="mui-container-fluid mui--text-center">
          <br>
          <a href="https://www.keckobservatory.org/" style="font-weight: bold; color: #638ba7;">Keck Observatory</a><br>
          Contact: coversheet@keck.hawaii.edu
        </div>
      </div>
    </footer>

    <script>
      function loadContent(url) {
        fetch(url)
        .then(response => response.text())
          .then(data => {
            const mainContent = document.getElementById('content');
            mainContent.innerHTML = data;

            // Find and execute scripts within the loaded content
            const scripts = mainContent.querySelectorAll('script[type="module"]');
            scripts.forEach(script => {
            const newScript = document.createElement('script');
            newScript.type = 'module';
            newScript.text = script.text;
            document.body.appendChild(newScript);
          });
        })
        .catch(error => console.error('Error loading content:', error));
        }

        // Load content from home initially
        window.onload = function() {
        loadContent('MaskHome.html');
      };

    </script>
    <script type="module">
      import { addAdminButton } from './js/MaskMain.js';
      addAdminButton();
    </script>


  </body>
</html>
